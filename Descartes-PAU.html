<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Textos de Descartes para la PAU. Andalucía 2026</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      text-align: center;
      background-color: #f5f8ff; /* Fondo azul pastel */
    }
    .question-container {
      display: none;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 10px;
      max-width: 600px;
      margin: 20px auto;
      background: #ffffff;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
    }
    .option {
      display: block;
      padding: 10px;
      margin: 10px 0;
      border: 2px solid #ddd;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
    }
    .option:hover {
      background: #e0ebff;
      transform: scale(1.05);
    }
    .correct {
      background: #c8e6c9;
      border-color: green;
    }
    .incorrect {
      background: #ffcdd2;
      border-color: red;
    }
    #start-btn, #restart-btn {
      display: none;
      margin-top: 20px;
      padding: 10px;
      background: #007BFF;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
    #restart-btn {
      background: #28a745;
    }
    /* Posiciona el botón "Siguiente" fijo a la derecha, en zona media/alta */
    #next-btn {
      position: fixed;
      right: 20px;
      top: 30%;
      padding: 10px;
      background: #007BFF;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      display: none;
    }
    /* Estilos para el contador de preguntas */
    #question-counter {
      position: fixed;
      right: 20px;
      top: 37%;
      font-size: 1.2em;
      font-weight: bold;
      color: #333;
    }
    #info-container {
      margin-top: 20px;
      font-size: 1.2em;
    }
    /* Sección de enlaces extra para el alumnado */
    #extra-links {
      display: block;
      margin-top: 20px;
      font-size: 0.9em;
      color: #444;
      text-align: center;
    }
    #extra-links a {
      color: #007BFF;
      text-decoration: none;
      margin: 0 5px;
    }
    #extra-links a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h1>Comprensión lectora: textos de Descartes para la PAU. Andalucía 2026.</h1>
  <h2 style="font-size: 0.6em; color: #555;">Tomás Cuesta. IES Juan de la Cierva</h2>

  <div id="info-container"></div>
  <button id="start-btn">Comenzar</button>
  
  <!-- Sección de enlaces extra a Amazon -->
  <div id="extra-links">
    <p><strong>Manuales para el alumnado (Amazon)</strong></p>
    <p><a href="https://www.amazon.es/dp/B0FWZZ7NVH" target="_blank">Itinerario Ético-Político</a></p>
    <p><a href="https://www.amazon.es/dp/B0FXDPZ7S6" target="_blank">Itinerario Ontológico-Epistemológico</a></p>
  </div>
  
  <div id="quiz-container" class="question-container"></div>
  <button id="next-btn">Siguiente</button>
  <div id="question-counter"></div>
  <button id="restart-btn">Reiniciar</button>
  
  <script>
    // Función para barajar un array usando el algoritmo de Fisher–Yates
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // JSON integrado con todas las preguntas de Descartes
    const data = {
      "preguntas": [
              {
          "texto": "“El primero consistía en no admitir cosa alguna como verdadera si no se la había conocido evidentemente como tal.”",
          "opciones": {
            "a": "Regla de la evidencia. No debemos aceptar como verdadero nada que no se presente con evidencia clara y distinta, pues la certeza es el criterio del conocimiento.",
            "b": "Descartes sostiene que la verdad puede aceptarse siempre que haya consenso entre los sabios, incluso aunque no se posea una evidencia individual.",
            "c": "Este pasaje refleja la importancia que Descartes otorga a las ideas adventicias, que provienen de los sentidos y permiten construir un conocimiento fiable."
          },
          "respuesta": "a"
        },
        {
          "texto": "“El segundo exigía que dividiese cada una de las dificultades a examinar en tantas parcelas como fuera posible y necesario para resolverlas más fácilmente.”",
          "opciones": {
            "a": "Descartes introduce aquí la duda metódica como instrumento para cuestionar todos los conocimientos adquiridos sin fundamento racional.",
            "b": "Descartes establece la regla del análisis, que consiste en descomponer los problemas complejos en partes más simples para poder resolverlos con claridad.",
            "c": "Descartes rechaza el uso de cualquier método racional y se apoya únicamente en la revelación divina como base del conocimiento filosófico."
          },
          "respuesta": "b"
        },
        {
          "texto": "“El tercero requería conducir por orden mis reflexiones comenzando por los objetos más simples y más fácilmente cognoscibles, para ascender poco a poco hasta el conocimiento de los más complejos.”",
          "opciones": {
            "a": "Este fragmento expresa la tercera regla, que orienta el conocimiento desde lo simple y claro hacia lo complejo, siguiendo un movimiento ascendente de la razón.",
            "b": "Descartes defiende que el conocimiento se obtiene a partir de la experiencia directa con los objetos complejos que la razón intenta comprender globalmente.",
            "c": "Aquí Descartes se refiere a la moral provisional, que le permitió actuar mientras su razón buscaba verdades firmes en el terreno del conocimiento."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Según el último de estos preceptos debería realizar recuentos tan completos y revisiones tan amplias que pudiese estar seguro de no omitir nada.”",
          "opciones": {
            "a": "Esta es la regla de la evidencia, que exige solo aceptar como verdadero aquello que se presenta clara y distintamente ante la razón.",
            "b": "Se trata de la regla de la enumeración, que implica revisar con cuidado todos los pasos del razonamiento para garantizar su corrección y evitar omisiones.",
            "c": "Es un ejemplo de cómo Descartes aplicaba la duda metódica de forma radical a todos los conocimientos recibidos por tradición."
          },
          "respuesta": "b"
        },
        {
          "texto": "“Pensaba que era preciso indagar otro método que, asimilando las ventajas de estos tres, estuviera exento de sus defectos.”",
          "opciones": {
            "a": "Descartes busca aquí un método racional y riguroso, capaz de mejorar los fallos o limitaciones de la tradición escolástica de la lógica y de las matemáticas.",
            "b": "Descartes defiende que no hay necesidad de método si se posee un talento natural fuerte para la filosofía y la lógica.",
            "c": "Este fragmento desarrolla su concepción dualista del ser humano como compuesto de res cogitans y res extensa."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Todas las cosas que pueden ser objeto del conocimiento de los hombres se entrelazan de igual forma.”",
          "opciones": {
            "a": "Descartes sostiene que el conocimiento está fragmentado y que cada disciplina tiene su propio método sin conexión entre ellas.",
            "b": "Descartes afirma que todo el conocimento es universalmente accesible y deducible mediante la razón.",
            "c": "Descartes insiste en que las cosas solo se conocen por intuición intelectual sin necesidad de método alguno."
          },
          "respuesta": "b"
        },
        {
          "texto": "“Absteniéndose de admitir como verdadera alguna que no lo sea y guardando siempre el orden necesario para deducir unas de otras, no puede haber algunas tan alejadas de nuestro conocimiento que no podamos conocer.”",
          "opciones": {
            "a": "Descartes sostiene que, aplicando su método con rigor, la razón puede alcanzar el conocimiento de cualquier objeto, por complejo que sea.",
            "b": "Descartes afirma que existen verdades que están más allá de toda comprensión humana y que, por tanto, deben aceptarse con fe.",
            "c": "Este pasaje muestra cómo las pasiones del alma pueden interferir en el juicio y obstaculizar la deducción racional."
          },
          "respuesta": "a"
        },
        {
          "texto": "“He advertido hace ya algún tiempo que, desde mi más temprana edad, había admitido como verdaderas muchas opiniones falsas.”",
          "opciones": {
            "a": "Aquí Descartes reconoce la necesidad de revisar los prejuicios adquiridos desde la infancia, ya que pueden haber sido aceptados sin fundamento.",
            "b": "Descartes afirma que solo debemos aceptar lo que aprendimos en la infancia, ya que ese conocimiento es natural y verdadero por costumbre.",
            "c": "Este fragmento trata sobre la diferencia entre ideas facticias y adventicias, propias del sistema cartesiano de clasificación de ideas."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Me era preciso emprender seriamente, una vez en la vida, la tarea de deshacerme de todas las opiniones a las que hasta entonces había dado crédito, y empezar todo de nuevo desde los fundamentos.”",
          "opciones": {
            "a": "Descartes introduce aquí la duda metódica, como estrategia para eliminar los conocimientos dudosos y edificar un saber nuevo sobre principios firmes.",
            "b": "Este fragmento justifica la existencia de un genio maligno que nos engaña y por eso no es posible confiar nunca en la razón humana.",
            "c": "Este texto defiende que las ciencias deben partir de la experiencia sensible y no de principios racionales, lo cual rechaza Descartes."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Me bastará para rechazarlas todas con encontrar en cada una el más pequeño motivo de duda.”",
          "opciones": {
            "a": "Este pasaje define la actitud de duda hiperbólica y metódica de Descartes, que sirve como instrumento para alcanzar la certeza.",
            "b": "Aquí Descartes defiende que las ideas innatas no pueden ponerse en duda porque son anteriores a toda experiencia sensible.",
            "c": "Este fragmento establece que la certeza solo puede provenir de los sentidos, y que las ideas deben contrastarse con la experiencia empírica."
          },
          "respuesta": "a"
        },
        {
          "texto": "“La ruina de los cimientos lleva necesariamente consigo la de todo el edificio, me dirigiré en principio contra los fundamentos mismos en que se apoyaban todas mis opiniones antiguas.”",
          "opciones": {
            "a": "Descartes muestra aquí su intención de aplicar la duda metódica hasta los fundamentos del conocimiento, derribando todo lo dudoso para reconstruirlo sobre principios absolutamente ciertos.",
            "b": "Descartes propone mantener los cimientos de la tradición filosófica y solo corregir los errores menores que afectan al edificio del saber.",
            "c": "El fragmento trata sobre la unión sustancial entre el alma y el cuerpo, que constituye la base de su teoría del dualismo."
          },
          "respuesta": "a"
        },
        {
          "texto": "“He experimentado a veces que los sentidos me engañaban, y es prudente no fiarse nunca por entero de quienes nos han engañado una vez.”",
          "opciones": {
            "a": "Descartes aplica aquí el principio de la duda metódica, señalando que los sentidos, al haber engañado en ocasiones, no pueden ser fundamento seguro de certeza.",
            "b": "Descartes defiende la experiencia sensible como fuente segura del conocimiento, ya que el error proviene solo de un mal uso de los sentidos.",
            "c": "El texto expresa su teoría de las ideas innatas, que provienen directamente de la razón sin intervención de los sentidos."
          },
          "respuesta": "a"
        },
        {
          "texto": "“No hay indicios concluyentes ni señales que basten a distinguir con claridad el sueño de la vigilia.”",
          "opciones": {
            "a": "Descartes desarrolla la hipótesis del sueño para mostrar que los sentidos pueden engañar incluso cuando creemos estar despiertos, reforzando así la duda metódica.",
            "b": "Descartes explica que el sueño y la vigilia son estados completamente distintos, pues en el primero no hay pensamiento racional.",
            "c": "Aquí se alude al dualismo cartesiano, que diferencia entre sustancia pensante y sustancia extensa."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Supongamos ahora que estamos dormidos, y que todas estas particularidades no son sino mentirosas ilusiones.”",
          "opciones": {
            "a": "Descartes utiliza esta suposición para ampliar la duda metódica: incluso nuestras percepciones más vivas pueden ser ilusorias, como en los sueños.",
            "b": "Este fragmento afirma que los sueños tienen el mismo valor cognitivo que las ideas claras y distintas.",
            "c": "Aquí Descartes defiende la existencia del alma como sustancia separada del cuerpo."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Las cosas que nos representamos en sueños son como cuadros y pinturas que deben formarse a semejanza de algo real y verdadero.”",
          "opciones": {
            "a": "Descartes señala que incluso los sueños están compuestos por elementos simples tomados de una realidad verdadera, lo que sugiere que hay nociones básicas ciertas.",
            "b": "Descartes sostiene que todo lo que aparece en los sueños carece de relación con la realidad objetiva y es completamente falso.",
            "c": "El texto se refiere al criterio de evidencia, según el cual solo lo que se percibe con claridad y distinción puede considerarse real."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Hay cosas aún más simples y universales realmente existentes, por cuya mezcla se forman todas las imágenes de las cosas que residen en nuestro pensamiento.”",
          "opciones": {
            "a": "Descartes sugiere que las ideas simples y universales, como la extensión o la figura, son los elementos básicos del pensamiento y no dependen de la experiencia sensible.",
            "b": "Aquí defiende que toda idea procede directamente de los sentidos y no existe ninguna forma universal previa.",
            "c": "Este pasaje expone su argumento ontológico sobre la existencia de Dios como ser perfecto."
          },
          "respuesta": "a"
        },
        {
          "texto": "“La aritmética, la geometría y demás ciencias de este género contienen algo cierto e indudable, pues dos más tres serán siempre cinco y el cuadrado no tendrá más de cuatro lados.”",
          "opciones": {
            "a": "Descartes considera que las matemáticas son modelo de conocimiento cierto, porque se basan en la evidencia y no en los sentidos.",
            "b": "Este fragmento sostiene que las ciencias empíricas son más seguras que las matemáticas por su relación con la experiencia.",
            "c": "Aquí desarrolla su doctrina de las ideas adventicias, que provienen del mundo exterior."
          },
          "respuesta": "a"
        },
        {
          "texto": "“¿Quién me asegura que el tal Dios no haya procedido de manera que no exista figura, ni magnitud, ni lugar, pero a la vez de modo que yo tenga la impresión de que todo eso existe tal y como lo veo?”",
          "opciones": {
            "a": "Descartes plantea la hipótesis de un Dios engañador para llevar la duda hasta las verdades matemáticas, mostrando que aún estas podrían ser puestas en cuestión.",
            "b": "Descartes afirma que Dios necesariamente engaña al hombre para mantener el orden del universo.",
            "c": "Este texto expone la distinción entre la res cogitans y la res extensa, propia del dualismo cartesiano."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Podría ocurrir que Dios haya querido que me engañe cuantas veces sumo dos más tres, o cuando enumero los lados de un cuadrado.”",
          "opciones": {
            "a": "Descartes radicaliza su duda al extenderla incluso a las verdades matemáticas, introduciendo la posibilidad de un Dios que lo engañe.",
            "b": "Descartes concluye que Dios efectivamente engaña al ser humano para poner a prueba su fe.",
            "c": "Aquí se expone el paso del método inductivo al deductivo como base del pensamiento cartesiano."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Supondré que hay cierto genio maligno, no menos artero y engañador que poderoso, el cual ha usado de toda su industria para engañarme.”",
          "opciones": {
            "a": "El genio maligno es una hipótesis extrema de la duda metódica, que lleva al límite la posibilidad de error.",
            "b": "Descartes afirma la existencia real del genio maligno como causa del mal en el mundo.",
            "c": "Este fragmento explica la teoría de las ideas innatas, que son puestas en el alma por Dios."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Arquímedes, para trasladar la tierra de lugar, sólo pedía un punto de apoyo firme e inmóvil; así yo también tendré derecho a concebir grandes esperanzas, si hallo tan sólo una cosa que sea cierta e indubitable.”",
          "opciones": {
            "a": "Descartes compara su búsqueda de una verdad firme con el punto de apoyo de Arquímedes, que serviría de fundamento seguro para todo el conocimiento.",
            "b": "Descartes sostiene que el conocimiento no necesita ningún punto de apoyo firme porque se basa en la experiencia inmediata.",
            "c": "Aquí desarrolla la prueba de la existencia de Dios como ser infinito y causa de sí mismo."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Supongo que todo lo que veo es falso; estoy persuadido de que nada de cuanto mi mendaz memoria me representa ha existido jamás.”",
          "opciones": {
            "a": "Descartes aplica la duda hiperbólica a todo lo percibido y recordado, mostrando que nada puede considerarse indudable salvo el pensamiento mismo.",
            "b": "El texto afirma que los sentidos son siempre fiables cuando se usan con atención y método.",
            "c": "Aquí se trata del dualismo entre alma y cuerpo, propio del cartesianismo."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Si yo estoy persuadido de algo, o meramente si pienso algo, es porque yo soy.”",
          "opciones": {
            "a": "Este pasaje anticipa el cogito: la existencia del pensamiento implica necesariamente la existencia del sujeto pensante.",
            "b": "Descartes niega la relación entre pensamiento y existencia, pues el pensar puede ser ilusorio.",
            "c": "Aquí se define el principio de evidencia, según el cual todo conocimiento proviene de los sentidos."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Si me engaña, es que yo soy; y, engáñeme cuanto quiera, nunca podrá hacer que yo no sea nada, mientras yo esté pensando que soy algo.”",
          "opciones": {
            "a": "Descartes demuestra que incluso si un genio maligno intentara engañarlo, el hecho de pensar prueba necesariamente su existencia como res cogitans.",
            "b": "El texto indica que el pensamiento puede existir sin sujeto pensante, lo que contradice la base del cogito.",
            "c": "Aquí se trata de la unión sustancial del alma y el cuerpo, no del pensamiento puro."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Es preciso concluir y dar como cosa cierta que esta proposición: yo soy, yo existo, es necesariamente verdadera, cuantas veces la pronuncio o la concibo en mi espíritu.”",
          "opciones": {
            "a": "Este es el momento culminante del método: el cogito ergo sum, verdad indudable.",
            "b": "Aquí Descartes establece que la existencia depende de la percepción sensible del propio cuerpo.",
            "c": "El pasaje se refiere a la existencia de Dios como ser perfecto y necesario."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Examinaré de nuevo lo que yo creía ser, antes de incidir en estos pensamientos, y quitaré de mis antiguas opiniones todo lo que puede combatirse mediante las razones que acabo de alegar.”",
          "opciones": {
            "a": "Descartes revisa críticamente sus creencias anteriores para eliminar todo lo que no cumpla el criterio de evidencia.",
            "b": "Aquí introduce su teoría de la sustancia extensa como principio del movimiento corporal.",
            "c": "El texto defiende la importancia de la costumbre como base del conocimiento moral."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Entiendo por cuerpo todo aquello que puede estar delimitado por una figura, estar situado en un lugar y llenar un espacio.”",
          "opciones": {
            "a": "Descartes define la sustancia material o res extensa.",
            "b": "Aquí define el alma como principio vital y causa del movimiento del cuerpo.",
            "c": "El fragmento explica la relación entre voluntad y entendimiento en la moral provisional."
          },
          "respuesta": "a"
        },
        {
          "texto": "“No creía yo que fuera atribuible a la naturaleza corpórea la potencia de moverse, sentir y pensar.”",
          "opciones": {
            "a": "Descartes afirma la distinción entre alma y cuerpo.",
            "b": "Sostiene que la materia es autosuficiente y que el pensamiento es una función corporal.",
            "c": "Este texto introduce la prueba cosmológica de la existencia de Dios como causa primera."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Paso revista una y otra vez, en mi espíritu, a esas cosas, y no hallo ninguna de la que pueda decir que está en mí.”",
          "opciones": {
            "a": "El autor descarta toda cualidad corporal o sensible que no pertenezca esencialmente al yo pensante.",
            "b": "Aquí rechaza la existencia del pensamiento como actividad real del alma.",
            "c": "El fragmento trata sobre la prueba ontológica de la existencia de Dios basada en la idea de perfección."
          },
          "respuesta": "a"
        },
        {
          "texto": "“El pensamiento es un atributo que me pertenece, siendo el único que no puede separarse de mí: yo soy, yo existo, todo el tiempo que estoy pensando.”",
          "opciones": {
            "a": "Descartes identifica el pensamiento como esencia de la res cogitans.",
            "b": "Descartes sostiene que el pensamiento es una función corporal que desaparece con la muerte.",
            "c": "Este texto explica la moral provisional, basada en la obediencia a las leyes y costumbres del país."
          },
          "respuesta": "a"
        },
        {
          "texto": "“No admito ahora nada que no sea necesariamente verdadero: así, pues, hablando con precisión, no soy más que una cosa que piensa, es decir, un espíritu, un entendimiento o una razón.”",
          "opciones": {
            "a": "Descartes define aquí la naturaleza del yo como una realidad que existe solo por el hecho de pensar, independientemente del cuerpo.",
            "b": "Descartes concluye que la realidad esencial del ser humano es la unión del alma con el cuerpo, sin que ninguna de las dos pueda pensarse por separado.",
            "c": "Este pasaje introduce la prueba ontológica de la existencia de Dios, basada en la idea de perfección presente en la razón humana."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Soy, entonces, una cosa verdadera, y verdaderamente existente. Mas, ¿qué cosa? Ya lo he dicho: una cosa que piensa.”",
          "opciones": {
            "a": "Lo único que no puede ponerse en duda es que el sujeto que piensa existe como res cogitans.",
            "b": "El texto desarrolla la teoría de las pasiones del alma como mediadoras entre la razón y los sentidos.",
            "c": "Aquí Descartes sostiene que el conocimiento verdadero debe basarse exclusivamente en la experiencia empírica."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Una cosa que piensa es una cosa que duda, que entiende, que afirma, que niega, que quiere, que no quiere, que imagina también, y que siente.”",
          "opciones": {
            "a": "Descartes enumera aquí las operaciones del pensamiento para mostrar que todas forman parte del yo como sustancia pensante.",
            "b": "Este fragmento afirma que el cuerpo humano es el verdadero sujeto de las funciones superiores como dudar o entender.",
            "c": "Aquí se explica la unión sustancial entre alma y cuerpo, característica esencial de la antropología cartesiana."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Es de suyo tan evidente que soy yo quien duda, entiende y desea, que no hace falta añadir aquí nada para explicarlo.”",
          "opciones": {
            "a": "La conciencia inmediata de nuestras operaciones mentales basta para fundar la certeza del yo pensante.",
            "b": "Aquí afirma que todas las ideas son adventicias, pues proceden de los objetos exteriores al sujeto.",
            "c": "El texto introduce la noción de res extensa como principio explicativo de la percepción."
          },
          "respuesta": "a"
        },
        {
          "texto": "“Es al menos muy cierto que me parece ver, oír, sentir calor, y eso es propiamente lo que en mí se llama sentir, y no es otra cosa que pensar.”",
          "opciones": {
            "a": "Descartes explica que incluso la sensación —aunque provenga de los sentidos— es una modalidad del pensamiento, y por tanto pertenece a la res cogitans.",
            "b": "Aquí sostiene que las sensaciones no tienen valor cognitivo alguno, ya que proceden exclusivamente del cuerpo.",
            "c": "Este pasaje demuestra que los sentidos pueden proporcionar conocimiento claro y distinto sobre la existencia del mundo exterior."
          },
          "respuesta": "a"
        }
     
      ]
    };
 
    let preguntas = data.preguntas;
    let preguntasElegidas = [];
    let preguntaActual = 0;
    let correctas = 0;

    const quizContainer = document.getElementById('quiz-container');
    const nextButton = document.getElementById('next-btn');
    const restartButton = document.getElementById('restart-btn');
    const startButton = document.getElementById('start-btn');
    const infoContainer = document.getElementById('info-container');

    infoContainer.innerHTML = `<p>El test contiene <strong>${preguntas.length}</strong> preguntas. Podrás elegir cuántas usar.</p>`;
    startButton.style.display = 'block';

    startButton.addEventListener('click', function() {
      let numPreguntas = prompt(`El test tiene ${preguntas.length} preguntas. ¿Cuántas deseas jugar?`, preguntas.length);
      numPreguntas = parseInt(numPreguntas);
      if (isNaN(numPreguntas) || numPreguntas < 1 || numPreguntas > preguntas.length) {
        alert('Número no válido. Se jugarán todas las preguntas.');
        numPreguntas = preguntas.length;
      }
      // Seleccionar preguntas aleatorias
      preguntasElegidas = shuffle([...preguntas]).slice(0, numPreguntas);
      preguntaActual = 0;
      correctas = 0;
      startButton.style.display = 'none';
      // Ocultar los enlaces extra al comenzar el test
      document.getElementById('extra-links').style.display = 'none';
      infoContainer.innerHTML = '';
      mostrarPregunta();
    });

    function mostrarPregunta() {
      if (preguntaActual < preguntasElegidas.length) {
        quizContainer.innerHTML = '';
        // Actualizar el contador de preguntas
        document.getElementById('question-counter').textContent = `Pregunta ${preguntaActual + 1} de ${preguntasElegidas.length}`;
        quizContainer.style.display = 'block';
        nextButton.style.display = 'none';

        let pregunta = preguntasElegidas[preguntaActual];
        let preguntaTitulo = document.createElement('h2');
        preguntaTitulo.textContent = pregunta.texto;
        quizContainer.appendChild(preguntaTitulo);

        // Convertir el objeto de opciones en un array de objetos y mezclarlo con Fisher–Yates
        let opcionesArray = Object.entries(pregunta.opciones)
          .map(([key, texto]) => ({ key, texto }));
        opcionesArray = shuffle(opcionesArray);

        opcionesArray.forEach(opcionObj => {
          let opcion = document.createElement('div');
          opcion.classList.add('option');
          opcion.textContent = opcionObj.texto;
          opcion.dataset.valor = opcionObj.key;
          opcion.addEventListener('click', function() {
            validarRespuesta(this, pregunta.respuesta);
          });
          quizContainer.appendChild(opcion);
        });
      } else {
        quizContainer.innerHTML = `<h2>¡Test finalizado!</h2><p>Has acertado ${correctas} de ${preguntasElegidas.length} preguntas.</p>`;
        nextButton.style.display = 'none';
        restartButton.style.display = 'block';
      }
    }

    function validarRespuesta(elemento, respuestaCorrecta) {
      let opciones = document.querySelectorAll('.option');
      opciones.forEach(op => op.style.pointerEvents = 'none');

      if (elemento.dataset.valor === respuestaCorrecta) {
        elemento.classList.add('correct');
        correctas++;
      } else {
        elemento.classList.add('incorrect');
        let correcta = document.querySelector(`.option[data-valor='${respuestaCorrecta}']`);
        if (correcta) correcta.classList.add('correct');
      }
      nextButton.style.display = 'block';
    }

    nextButton.addEventListener('click', function() {
      preguntaActual++;
      mostrarPregunta();
    });

    restartButton.addEventListener('click', function() {
      this.style.display = 'none';
      startButton.style.display = 'none';
      preguntaActual = 0;
      correctas = 0;
      infoContainer.innerHTML = `<p>El test contiene <strong>${preguntas.length}</strong> preguntas.</p>`;
      document.getElementById('question-counter').textContent = '';
      startButton.style.display = 'block';
      // Volver a mostrar los enlaces extra al reiniciar
      document.getElementById('extra-links').style.display = 'block';
      quizContainer.innerHTML = '';
      quizContainer.style.display = 'none';
    });
  </script>
</body>
</html>
